let WhatsAlexa = require('../events');
let {MessageType} = require('@adiwajshing/baileys');
let fs = require('fs');
let ffmpeg = require('fluent-ffmpeg');
let { sticker2Video } = require('../root/WhatsAlexa-Modules/modules/sticker2Video');
let {execFile} = require('child_process');
let cwebp = require('cwebp-bin');
let Config = require('../config');
let Language = require('../language');
let Lang = Language.getString('sticker');

var _0x12ec91=_0x457f;function _0x457f(_0x5c7cf3,_0x324f60){var _0x27637c=_0x2763();return _0x457f=function(_0x457fd9,_0x2956b1){_0x457fd9=_0x457fd9-0x82;var _0x8cf1f9=_0x27637c[_0x457fd9];return _0x8cf1f9;},_0x457f(_0x5c7cf3,_0x324f60);}(function(_0x3dc0e3,_0xf32366){var _0x529dc7=_0x457f,_0x275e95=_0x3dc0e3();while(!![]){try{var _0x1fec47=-parseInt(_0x529dc7(0x8b))/0x1+-parseInt(_0x529dc7(0x8f))/0x2+-parseInt(_0x529dc7(0x85))/0x3*(-parseInt(_0x529dc7(0x87))/0x4)+-parseInt(_0x529dc7(0x84))/0x5+parseInt(_0x529dc7(0x86))/0x6+parseInt(_0x529dc7(0x90))/0x7*(-parseInt(_0x529dc7(0x8a))/0x8)+parseInt(_0x529dc7(0x89))/0x9*(parseInt(_0x529dc7(0x83))/0xa);if(_0x1fec47===_0xf32366)break;else _0x275e95['push'](_0x275e95['shift']());}catch(_0x312f7f){_0x275e95['push'](_0x275e95['shift']());}}}(_0x2763,0x6631f));var VS_DESC='',STICKER_NEEDREPLY='',ANIMATE='';if(Config[_0x12ec91(0x82)]=='EN')VS_DESC='Converts\x20sticker\x20to\x20video.',STICKER_NEEDREPLY='*You\x20must\x20reply\x20to\x20any\x20Sticker!*',ANIMATE='```Converting\x20Sticker\x20To\x20Video...```';if(Config[_0x12ec91(0x82)]=='ML')VS_DESC='സ്റ്റിക്കർ\x20വീഡിയോയിലേക്ക്\x20പരിവർത്തനം\x20ചെയ്യുന്നു.',STICKER_NEEDREPLY=_0x12ec91(0x8c),ANIMATE=_0x12ec91(0x8d);if(Config[_0x12ec91(0x82)]=='ID')VS_DESC=_0x12ec91(0x8e),STICKER_NEEDREPLY='*Anda\x20harus\x20membalas\x20Stiker\x20apa\x20pun!*',ANIMATE=_0x12ec91(0x88);function _0x2763(){var _0x5b4e7e=['883780iUIkBY','2447645nYIZQe','483vJhPFv','4361544tfuTUg','20036uBLWAC','```Mengonversi\x20Stiker\x20Menjadi\x20Video...```','117eusDkC','31024KVFEzp','591998OgfyDx','*നിങ്ങൾ\x20ഒരു\x20സ്റ്റിക്കറിന്\x20മറുപടി\x20നൽകണം!*','```സ്റ്റിക്കർ\x20വീഡിയോയിലേക്ക്\x20പരിവർത്തനം\x20ചെയ്യുന്നു...```','Mengonversi\x20stiker\x20menjadi\x20video.','1239718DPqMuq','1015NBdjTO','LANG'];_0x2763=function(){return _0x5b4e7e;};return _0x2763();}

if (Config.WORKTYPE == 'private') {

    WhatsAlexa.addCommand({pattern: 'sticker', fromMe: true, desc: Lang.STICKER_DESC}, (async (message, match) => {    

    var _0x15818a=_0x59bc;(function(_0x4a6a19,_0x3479eb){var _0x39ba89=_0x59bc,_0x51928f=_0x4a6a19();while(!![]){try{var _0x527005=parseInt(_0x39ba89(0xfa))/0x1+parseInt(_0x39ba89(0x112))/0x2+-parseInt(_0x39ba89(0x10e))/0x3*(parseInt(_0x39ba89(0xff))/0x4)+parseInt(_0x39ba89(0xf8))/0x5*(parseInt(_0x39ba89(0x103))/0x6)+parseInt(_0x39ba89(0xfb))/0x7*(parseInt(_0x39ba89(0xf7))/0x8)+parseInt(_0x39ba89(0x106))/0x9*(parseInt(_0x39ba89(0xf3))/0xa)+-parseInt(_0x39ba89(0x101))/0xb;if(_0x527005===_0x3479eb)break;else _0x51928f['push'](_0x51928f['shift']());}catch(_0x3e1c8b){_0x51928f['push'](_0x51928f['shift']());}}}(_0x2e1f,0xeb335));if(message['reply_message']===![])return await message[_0x15818a(0xef)][_0x15818a(0x104)](message['jid'],Lang[_0x15818a(0x105)],MessageType[_0x15818a(0x10d)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message[_0x15818a(0x102)]});var downloading=await message['client'][_0x15818a(0x104)](message[_0x15818a(0xf2)],Lang[_0x15818a(0xf6)],MessageType[_0x15818a(0x10d)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message['data']}),location=await message[_0x15818a(0xef)][_0x15818a(0x111)]({'key':{'remoteJid':message['reply_message'][_0x15818a(0xf2)],'id':message[_0x15818a(0xfd)]['id']},'message':message[_0x15818a(0xfd)][_0x15818a(0x102)][_0x15818a(0xf9)]});function _0x59bc(_0x279a8d,_0x49cd23){var _0x2e1ff8=_0x2e1f();return _0x59bc=function(_0x59bcb8,_0x363cc7){_0x59bcb8=_0x59bcb8-0xef;var _0x3412ff=_0x2e1ff8[_0x59bcb8];return _0x3412ff;},_0x59bc(_0x279a8d,_0x49cd23);}if(message[_0x15818a(0xfd)][_0x15818a(0x100)]===![]&&message[_0x15818a(0xfd)][_0x15818a(0xf0)])return execFile(cwebp,[location,'-o',_0x15818a(0x110)],async _0x51bf1b=>{var _0x5c344a=_0x15818a;if(_0x51bf1b)throw _0x51bf1b;await message[_0x5c344a(0x104)](fs[_0x5c344a(0xfe)](_0x5c344a(0xf4)),MessageType['sticker'],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message[_0x5c344a(0x102)]});}),await message[_0x15818a(0xef)][_0x15818a(0x109)](message[_0x15818a(0xf2)],{'id':downloading['key']['id'],'remoteJid':message['jid'],'fromMe':!![]});function _0x2e1f(){var _0x365d62=['27InHTIF','end','output.webp','downloadAndSaveMediaMessage','2297152IynhJF','client','image','-loop\x200','jid','160050ecRKaD','./output.webp','-lossless\x201','DOWNLOADING','6853576FfhTWt','14185xqFAmy','quotedMessage','1922496dxiOGG','14JjsQzS','sticker','reply_message','readFileSync','118496VDLGjd','video','77334257CqYeMT','data','3594CqjCvp','sendMessage','NEED_REPLY','999eNhkMQ','sticker.webp','save','deleteMessage','-vsync\x200','-qscale\x201','-an','text'];_0x2e1f=function(){return _0x365d62;};return _0x2e1f();}ffmpeg(location)['outputOptions'](['-y','-vcodec\x20libwebp',_0x15818a(0xf5),_0x15818a(0x10b),'-preset\x20default',_0x15818a(0xf1),_0x15818a(0x10c),_0x15818a(0x10a),'-s\x20512x512'])[_0x15818a(0x108)](_0x15818a(0x107))['on'](_0x15818a(0x10f),async()=>{var _0xd019de=_0x15818a;await message[_0xd019de(0x104)](fs[_0xd019de(0xfe)]('sticker.webp'),MessageType[_0xd019de(0xfc)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message[_0xd019de(0x102)]});});return await message['client'][_0x15818a(0x109)](message['jid'],{'id':downloading['key']['id'],'remoteJid':message[_0x15818a(0xf2)],'fromMe':!![]});
    }));

    WhatsAlexa.addCommand({pattern: 'vsticker', fromMe: true, desc: VS_DESC}, (async (message, match) => {    

    function _0x1457(_0x203315,_0x4226dd){const _0x5a0c5d=_0x5a0c();return _0x1457=function(_0x145712,_0x205ea4){_0x145712=_0x145712-0x8a;let _0xc82c9f=_0x5a0c5d[_0x145712];return _0xc82c9f;},_0x1457(_0x203315,_0x4226dd);}const _0x2b63d1=_0x1457;function _0x5a0c(){const _0x250f73=['9317JtpAvk','sendVideo','quotedMessage','existsSync','reply_message','then','finish','client','663580xMqLGJ','5355056tdsYAW','302188EtuFBZ','unlinkSync','19911663KeKBOj','downloadAndSaveMediaMessage','3ONRglS','data','998756ZlORUi','createWriteStream','jid','pipe','stream','/root/WhatsAlexa/src/stweb.mp4','sendReply','1715848TZArxl','3486qDrQIO'];_0x5a0c=function(){return _0x250f73;};return _0x5a0c();}(function(_0x3de55e,_0x24e7e4){const _0x2b819d=_0x1457,_0x27fb68=_0x3de55e();while(!![]){try{const _0x5f4807=-parseInt(_0x2b819d(0x8d))/0x1+-parseInt(_0x2b819d(0x93))/0x2*(-parseInt(_0x2b819d(0x91))/0x3)+-parseInt(_0x2b819d(0x9a))/0x4+-parseInt(_0x2b819d(0x8b))/0x5+-parseInt(_0x2b819d(0x9b))/0x6*(parseInt(_0x2b819d(0x9c))/0x7)+-parseInt(_0x2b819d(0x8c))/0x8+parseInt(_0x2b819d(0x8f))/0x9;if(_0x5f4807===_0x24e7e4)break;else _0x27fb68['push'](_0x27fb68['shift']());}catch(_0x31c764){_0x27fb68['push'](_0x27fb68['shift']());}}}(_0x5a0c,0x62eea));if(message[_0x2b63d1(0xa0)]===![])return await message[_0x2b63d1(0x99)](STICKER_NEEDREPLY);await message[_0x2b63d1(0x8a)][_0x2b63d1(0x99)](ANIMATE);const savedFilename=await message[_0x2b63d1(0x8a)][_0x2b63d1(0x90)]({'key':{'remoteJid':message[_0x2b63d1(0xa0)][_0x2b63d1(0x95)],'id':message[_0x2b63d1(0xa0)]['id']},'message':message[_0x2b63d1(0xa0)][_0x2b63d1(0x92)][_0x2b63d1(0x9e)]});await sticker2Video(savedFilename)[_0x2b63d1(0xa1)](async _0x32bc36=>{const _0xf64e22=_0x2b63d1;await axios({'method':'GET','url':_0x32bc36['result'],'responseType':_0xf64e22(0x97)})['then'](({data:_0x27d5fa})=>{const _0x2c5b18=_0xf64e22;let _0x143231=_0x27d5fa[_0x2c5b18(0x96)](fs[_0x2c5b18(0x94)]('/root/WhatsAlexa/src/stweb.mp4'));_0x143231['on'](_0x2c5b18(0xa2),async()=>{const _0x27b924=_0x2c5b18;await message[_0x27b924(0x9d)](fs['readFileSync']('/root/WhatsAlexa/src/stweb.mp4'));if(fs[_0x27b924(0x9f)](savedFilename))fs[_0x27b924(0x8e)](savedFilename);if(fs[_0x27b924(0x9f)]('/root/WhatsAlexa/src/stweb.mp4'))fs[_0x27b924(0x8e)](_0x27b924(0x98));});});});
    }));    
}
else if (Config.WORKTYPE == 'public') {

    WhatsAlexa.addCommand({pattern: 'sticker', fromMe: false, desc: Lang.STICKER_DESC}, (async (message, match) => {    

    var _0x15818a=_0x59bc;(function(_0x4a6a19,_0x3479eb){var _0x39ba89=_0x59bc,_0x51928f=_0x4a6a19();while(!![]){try{var _0x527005=parseInt(_0x39ba89(0xfa))/0x1+parseInt(_0x39ba89(0x112))/0x2+-parseInt(_0x39ba89(0x10e))/0x3*(parseInt(_0x39ba89(0xff))/0x4)+parseInt(_0x39ba89(0xf8))/0x5*(parseInt(_0x39ba89(0x103))/0x6)+parseInt(_0x39ba89(0xfb))/0x7*(parseInt(_0x39ba89(0xf7))/0x8)+parseInt(_0x39ba89(0x106))/0x9*(parseInt(_0x39ba89(0xf3))/0xa)+-parseInt(_0x39ba89(0x101))/0xb;if(_0x527005===_0x3479eb)break;else _0x51928f['push'](_0x51928f['shift']());}catch(_0x3e1c8b){_0x51928f['push'](_0x51928f['shift']());}}}(_0x2e1f,0xeb335));if(message['reply_message']===![])return await message[_0x15818a(0xef)][_0x15818a(0x104)](message['jid'],Lang[_0x15818a(0x105)],MessageType[_0x15818a(0x10d)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message[_0x15818a(0x102)]});var downloading=await message['client'][_0x15818a(0x104)](message[_0x15818a(0xf2)],Lang[_0x15818a(0xf6)],MessageType[_0x15818a(0x10d)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message['data']}),location=await message[_0x15818a(0xef)][_0x15818a(0x111)]({'key':{'remoteJid':message['reply_message'][_0x15818a(0xf2)],'id':message[_0x15818a(0xfd)]['id']},'message':message[_0x15818a(0xfd)][_0x15818a(0x102)][_0x15818a(0xf9)]});function _0x59bc(_0x279a8d,_0x49cd23){var _0x2e1ff8=_0x2e1f();return _0x59bc=function(_0x59bcb8,_0x363cc7){_0x59bcb8=_0x59bcb8-0xef;var _0x3412ff=_0x2e1ff8[_0x59bcb8];return _0x3412ff;},_0x59bc(_0x279a8d,_0x49cd23);}if(message[_0x15818a(0xfd)][_0x15818a(0x100)]===![]&&message[_0x15818a(0xfd)][_0x15818a(0xf0)])return execFile(cwebp,[location,'-o',_0x15818a(0x110)],async _0x51bf1b=>{var _0x5c344a=_0x15818a;if(_0x51bf1b)throw _0x51bf1b;await message[_0x5c344a(0x104)](fs[_0x5c344a(0xfe)](_0x5c344a(0xf4)),MessageType['sticker'],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message[_0x5c344a(0x102)]});}),await message[_0x15818a(0xef)][_0x15818a(0x109)](message[_0x15818a(0xf2)],{'id':downloading['key']['id'],'remoteJid':message['jid'],'fromMe':!![]});function _0x2e1f(){var _0x365d62=['27InHTIF','end','output.webp','downloadAndSaveMediaMessage','2297152IynhJF','client','image','-loop\x200','jid','160050ecRKaD','./output.webp','-lossless\x201','DOWNLOADING','6853576FfhTWt','14185xqFAmy','quotedMessage','1922496dxiOGG','14JjsQzS','sticker','reply_message','readFileSync','118496VDLGjd','video','77334257CqYeMT','data','3594CqjCvp','sendMessage','NEED_REPLY','999eNhkMQ','sticker.webp','save','deleteMessage','-vsync\x200','-qscale\x201','-an','text'];_0x2e1f=function(){return _0x365d62;};return _0x2e1f();}ffmpeg(location)['outputOptions'](['-y','-vcodec\x20libwebp',_0x15818a(0xf5),_0x15818a(0x10b),'-preset\x20default',_0x15818a(0xf1),_0x15818a(0x10c),_0x15818a(0x10a),'-s\x20512x512'])[_0x15818a(0x108)](_0x15818a(0x107))['on'](_0x15818a(0x10f),async()=>{var _0xd019de=_0x15818a;await message[_0xd019de(0x104)](fs[_0xd019de(0xfe)]('sticker.webp'),MessageType[_0xd019de(0xfc)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':message[_0xd019de(0x102)]});});return await message['client'][_0x15818a(0x109)](message['jid'],{'id':downloading['key']['id'],'remoteJid':message[_0x15818a(0xf2)],'fromMe':!![]});
    }));

    WhatsAlexa.addCommand({pattern: 'vsticker', fromMe: false, desc: VS_DESC}, (async (message, match) => {    

    function _0x1457(_0x203315,_0x4226dd){const _0x5a0c5d=_0x5a0c();return _0x1457=function(_0x145712,_0x205ea4){_0x145712=_0x145712-0x8a;let _0xc82c9f=_0x5a0c5d[_0x145712];return _0xc82c9f;},_0x1457(_0x203315,_0x4226dd);}const _0x2b63d1=_0x1457;function _0x5a0c(){const _0x250f73=['9317JtpAvk','sendVideo','quotedMessage','existsSync','reply_message','then','finish','client','663580xMqLGJ','5355056tdsYAW','302188EtuFBZ','unlinkSync','19911663KeKBOj','downloadAndSaveMediaMessage','3ONRglS','data','998756ZlORUi','createWriteStream','jid','pipe','stream','/root/WhatsAlexa/src/stweb.mp4','sendReply','1715848TZArxl','3486qDrQIO'];_0x5a0c=function(){return _0x250f73;};return _0x5a0c();}(function(_0x3de55e,_0x24e7e4){const _0x2b819d=_0x1457,_0x27fb68=_0x3de55e();while(!![]){try{const _0x5f4807=-parseInt(_0x2b819d(0x8d))/0x1+-parseInt(_0x2b819d(0x93))/0x2*(-parseInt(_0x2b819d(0x91))/0x3)+-parseInt(_0x2b819d(0x9a))/0x4+-parseInt(_0x2b819d(0x8b))/0x5+-parseInt(_0x2b819d(0x9b))/0x6*(parseInt(_0x2b819d(0x9c))/0x7)+-parseInt(_0x2b819d(0x8c))/0x8+parseInt(_0x2b819d(0x8f))/0x9;if(_0x5f4807===_0x24e7e4)break;else _0x27fb68['push'](_0x27fb68['shift']());}catch(_0x31c764){_0x27fb68['push'](_0x27fb68['shift']());}}}(_0x5a0c,0x62eea));if(message[_0x2b63d1(0xa0)]===![])return await message[_0x2b63d1(0x99)](STICKER_NEEDREPLY);await message[_0x2b63d1(0x8a)][_0x2b63d1(0x99)](ANIMATE);const savedFilename=await message[_0x2b63d1(0x8a)][_0x2b63d1(0x90)]({'key':{'remoteJid':message[_0x2b63d1(0xa0)][_0x2b63d1(0x95)],'id':message[_0x2b63d1(0xa0)]['id']},'message':message[_0x2b63d1(0xa0)][_0x2b63d1(0x92)][_0x2b63d1(0x9e)]});await sticker2Video(savedFilename)[_0x2b63d1(0xa1)](async _0x32bc36=>{const _0xf64e22=_0x2b63d1;await axios({'method':'GET','url':_0x32bc36['result'],'responseType':_0xf64e22(0x97)})['then'](({data:_0x27d5fa})=>{const _0x2c5b18=_0xf64e22;let _0x143231=_0x27d5fa[_0x2c5b18(0x96)](fs[_0x2c5b18(0x94)]('/root/WhatsAlexa/src/stweb.mp4'));_0x143231['on'](_0x2c5b18(0xa2),async()=>{const _0x27b924=_0x2c5b18;await message[_0x27b924(0x9d)](fs['readFileSync']('/root/WhatsAlexa/src/stweb.mp4'));if(fs[_0x27b924(0x9f)](savedFilename))fs[_0x27b924(0x8e)](savedFilename);if(fs[_0x27b924(0x9f)]('/root/WhatsAlexa/src/stweb.mp4'))fs[_0x27b924(0x8e)](_0x27b924(0x98));});});});
    }));
}
