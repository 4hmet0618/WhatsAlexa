let WhatsAlexa = require('../events');
let {MessageType} = require('@adiwajshing/baileys');
let fs = require('fs');
let ffmpeg = require('fluent-ffmpeg');
let {execFile} = require('child_process');
let cwebp = require('cwebp-bin');
let Config = require('../config');
let Language = require('../language');
let Lang = Language.getString('sticker');

if (Config.WORKTYPE == 'private') {

    WhatsAlexa.addCommand({pattern: 'sticker', fromMe: true, desc: Lang.STICKER_DESC}, (async (message, match) => {   

    function _0x5227(_0x5f16da,_0x202843){var _0x422a5a=_0x422a();return _0x5227=function(_0x522793,_0x51f566){_0x522793=_0x522793-0xf9;var _0x4ebce2=_0x422a5a[_0x522793];return _0x4ebce2;},_0x5227(_0x5f16da,_0x202843);}var _0x2fbf84=_0x5227;(function(_0x48c93b,_0x4ba3be){var _0x1efb4a=_0x5227,_0x449821=_0x48c93b();while(!![]){try{var _0x46d2cb=parseInt(_0x1efb4a(0xfd))/0x1*(parseInt(_0x1efb4a(0x10b))/0x2)+parseInt(_0x1efb4a(0xfb))/0x3+parseInt(_0x1efb4a(0x123))/0x4*(-parseInt(_0x1efb4a(0x106))/0x5)+parseInt(_0x1efb4a(0xff))/0x6*(parseInt(_0x1efb4a(0x11a))/0x7)+-parseInt(_0x1efb4a(0x122))/0x8+parseInt(_0x1efb4a(0x116))/0x9*(-parseInt(_0x1efb4a(0xfe))/0xa)+-parseInt(_0x1efb4a(0x109))/0xb;if(_0x46d2cb===_0x4ba3be)break;else _0x449821['push'](_0x449821['shift']());}catch(_0x463d28){_0x449821['push'](_0x449821['shift']());}}}(_0x422a,0x8c20c));if(message['reply_message']===![])return await message[_0x2fbf84(0x115)][_0x2fbf84(0x118)](message[_0x2fbf84(0x11d)],Lang[_0x2fbf84(0x10a)],MessageType[_0x2fbf84(0x100)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':{'key':{'fromMe':![],'participant':'0@s.whatsapp.net',...message[_0x2fbf84(0x11d)]?{'remoteJid':_0x2fbf84(0x11b)}:{}},'message':{'imageMessage':{'url':_0x2fbf84(0x108),'mimetype':_0x2fbf84(0x117),'caption':'▣\x20𝗣𝗼𝘄𝗲𝗿𝗲𝗱\x20𝗯𝘆\x20𝗪𝗵𝗮𝘁𝘀𝗔𝗹𝗲𝘅𝗮\x20▣','fileSha256':_0x2fbf84(0xfa),'fileLength':_0x2fbf84(0x10f),'height':0x438,'width':0x437,'mediaKey':_0x2fbf84(0x120),'fileEncSha256':_0x2fbf84(0x105),'directPath':'/v/t62.7118-24/21427642_840952686474581_572788076332761430_n.enc?oh=3f57c1ba2fcab95f2c0bb475d72720ba&oe=602F3D69','mediaKeyTimestamp':'1610993486','jpegThumbnail':fs[_0x2fbf84(0xfc)](_0x2fbf84(0xf9))}}}});function _0x422a(){var _0x4e0e3c=['/v/t62.7118-24/21427642_840952686474581_572788076332761430_n.enc?oh=3f57c1ba2fcab95f2c0bb475d72720ba&oe=602F3D69','https://mmg.whatsapp.net/d/f/At0x7ZdIvuicfjlf9oWS6A3AR9XPh0P-hZIVPLsI70nM.enc','5453646gdhzcP','NEED_REPLY','2ktNpYJ','video','sticker.webp','downloadAndSaveMediaMessage','28777','1610993486','0@s.whatsapp.net','image','videoFilters','reply_message','client','2939211Kkcmsb','image/jpeg','sendMessage','outputOptions','380317QgkOff','status@broadcast','deleteMessage','jid','output.webp','scale=2000:2000:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=2000:2000:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1','vXmRR7ZUeDWjXy5iQk17TrowBzuwRya0errAFnXxbGc=','./output.webp','8104816XQGLOr','1436TdoNMk','./src/image/WhatsAlexa.png','+Ia+Dwib70Y1CWRMAP9QLJKjIJt54fKycOfB2OEZbTU=','1622889mEdSJZ','readFileSync','1031834vrzwLC','10EaPYfY','114WabJwF','text','▣\x20𝗣𝗼𝘄𝗲𝗿𝗲𝗱\x20𝗯𝘆\x20𝗪𝗵𝗮𝘁𝘀𝗔𝗹𝗲𝘅𝗮\x20▣','sticker','quotedMessage','end','sR9D2RS5JSifw49HeBADguI23fWDz1aZu4faWG/CyRY=','2725dXMrkX'];_0x422a=function(){return _0x4e0e3c;};return _0x422a();}var downloading=await message[_0x2fbf84(0x115)][_0x2fbf84(0x118)](message[_0x2fbf84(0x11d)],Lang['DOWNLOADING'],MessageType['text'],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':{'key':{'fromMe':![],'participant':_0x2fbf84(0x111),...message[_0x2fbf84(0x11d)]?{'remoteJid':_0x2fbf84(0x11b)}:{}},'message':{'imageMessage':{'url':'https://mmg.whatsapp.net/d/f/At0x7ZdIvuicfjlf9oWS6A3AR9XPh0P-hZIVPLsI70nM.enc','mimetype':_0x2fbf84(0x117),'caption':_0x2fbf84(0x101),'fileSha256':'+Ia+Dwib70Y1CWRMAP9QLJKjIJt54fKycOfB2OEZbTU=','fileLength':_0x2fbf84(0x10f),'height':0x438,'width':0x437,'mediaKey':_0x2fbf84(0x120),'fileEncSha256':_0x2fbf84(0x105),'directPath':_0x2fbf84(0x107),'mediaKeyTimestamp':_0x2fbf84(0x110),'jpegThumbnail':fs['readFileSync'](_0x2fbf84(0xf9))}}}}),location=await message[_0x2fbf84(0x115)][_0x2fbf84(0x10e)]({'key':{'remoteJid':message[_0x2fbf84(0x114)][_0x2fbf84(0x11d)],'id':message[_0x2fbf84(0x114)]['id']},'message':message[_0x2fbf84(0x114)]['data'][_0x2fbf84(0x103)]});if(message[_0x2fbf84(0x114)][_0x2fbf84(0x10c)]===![]&&message[_0x2fbf84(0x114)][_0x2fbf84(0x112)])return execFile(cwebp,[location,'-o',_0x2fbf84(0x11e)],async _0x112328=>{var _0xb8a6a9=_0x2fbf84;if(_0x112328)throw _0x112328;await message[_0xb8a6a9(0x118)](fs['readFileSync'](_0xb8a6a9(0x121)),MessageType[_0xb8a6a9(0x102)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':{'key':{'fromMe':![],'participant':'0@s.whatsapp.net',...message[_0xb8a6a9(0x11d)]?{'remoteJid':_0xb8a6a9(0x11b)}:{}},'message':{'imageMessage':{'url':_0xb8a6a9(0x108),'mimetype':_0xb8a6a9(0x117),'caption':_0xb8a6a9(0x101),'fileSha256':_0xb8a6a9(0xfa),'fileLength':_0xb8a6a9(0x10f),'height':0x438,'width':0x437,'mediaKey':_0xb8a6a9(0x120),'fileEncSha256':_0xb8a6a9(0x105),'directPath':_0xb8a6a9(0x107),'mediaKeyTimestamp':_0xb8a6a9(0x110),'jpegThumbnail':fs['readFileSync'](_0xb8a6a9(0xf9))}}}});}),await message[_0x2fbf84(0x115)]['deleteMessage'](message[_0x2fbf84(0x11d)],{'id':downloading['key']['id'],'remoteJid':message[_0x2fbf84(0x11d)],'fromMe':!![]});ffmpeg(location)[_0x2fbf84(0x119)](['-y','-vcodec\x20libwebp'])[_0x2fbf84(0x113)](_0x2fbf84(0x11f))['save']('st.webp')['on'](_0x2fbf84(0x104),async()=>{var _0x52ae35=_0x2fbf84;await message[_0x52ae35(0x118)](fs[_0x52ae35(0xfc)](_0x52ae35(0x10d)),MessageType['sticker'],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':{'key':{'fromMe':![],'participant':'0@s.whatsapp.net',...message[_0x52ae35(0x11d)]?{'remoteJid':_0x52ae35(0x11b)}:{}},'message':{'imageMessage':{'url':_0x52ae35(0x108),'mimetype':_0x52ae35(0x117),'caption':'▣\x20𝗣𝗼𝘄𝗲𝗿𝗲𝗱\x20𝗯𝘆\x20𝗪𝗵𝗮𝘁𝘀𝗔𝗹𝗲𝘅𝗮\x20▣','fileSha256':'+Ia+Dwib70Y1CWRMAP9QLJKjIJt54fKycOfB2OEZbTU=','fileLength':'28777','height':0x438,'width':0x437,'mediaKey':_0x52ae35(0x120),'fileEncSha256':_0x52ae35(0x105),'directPath':'/v/t62.7118-24/21427642_840952686474581_572788076332761430_n.enc?oh=3f57c1ba2fcab95f2c0bb475d72720ba&oe=602F3D69','mediaKeyTimestamp':'1610993486','jpegThumbnail':fs[_0x52ae35(0xfc)](_0x52ae35(0xf9))}}}});});return await message[_0x2fbf84(0x115)][_0x2fbf84(0x11c)](message[_0x2fbf84(0x11d)],{'id':downloading['key']['id'],'remoteJid':message[_0x2fbf84(0x11d)],'fromMe':!![]});
    }));
}
else if (Config.WORKTYPE == 'public') {

    WhatsAlexa.addCommand({pattern: 'sticker', fromMe: false, desc: Lang.STICKER_DESC}, (async (message, match) => {    

    function _0x5227(_0x5f16da,_0x202843){var _0x422a5a=_0x422a();return _0x5227=function(_0x522793,_0x51f566){_0x522793=_0x522793-0xf9;var _0x4ebce2=_0x422a5a[_0x522793];return _0x4ebce2;},_0x5227(_0x5f16da,_0x202843);}var _0x2fbf84=_0x5227;(function(_0x48c93b,_0x4ba3be){var _0x1efb4a=_0x5227,_0x449821=_0x48c93b();while(!![]){try{var _0x46d2cb=parseInt(_0x1efb4a(0xfd))/0x1*(parseInt(_0x1efb4a(0x10b))/0x2)+parseInt(_0x1efb4a(0xfb))/0x3+parseInt(_0x1efb4a(0x123))/0x4*(-parseInt(_0x1efb4a(0x106))/0x5)+parseInt(_0x1efb4a(0xff))/0x6*(parseInt(_0x1efb4a(0x11a))/0x7)+-parseInt(_0x1efb4a(0x122))/0x8+parseInt(_0x1efb4a(0x116))/0x9*(-parseInt(_0x1efb4a(0xfe))/0xa)+-parseInt(_0x1efb4a(0x109))/0xb;if(_0x46d2cb===_0x4ba3be)break;else _0x449821['push'](_0x449821['shift']());}catch(_0x463d28){_0x449821['push'](_0x449821['shift']());}}}(_0x422a,0x8c20c));if(message['reply_message']===![])return await message[_0x2fbf84(0x115)][_0x2fbf84(0x118)](message[_0x2fbf84(0x11d)],Lang[_0x2fbf84(0x10a)],MessageType[_0x2fbf84(0x100)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':{'key':{'fromMe':![],'participant':'0@s.whatsapp.net',...message[_0x2fbf84(0x11d)]?{'remoteJid':_0x2fbf84(0x11b)}:{}},'message':{'imageMessage':{'url':_0x2fbf84(0x108),'mimetype':_0x2fbf84(0x117),'caption':'▣\x20𝗣𝗼𝘄𝗲𝗿𝗲𝗱\x20𝗯𝘆\x20𝗪𝗵𝗮𝘁𝘀𝗔𝗹𝗲𝘅𝗮\x20▣','fileSha256':_0x2fbf84(0xfa),'fileLength':_0x2fbf84(0x10f),'height':0x438,'width':0x437,'mediaKey':_0x2fbf84(0x120),'fileEncSha256':_0x2fbf84(0x105),'directPath':'/v/t62.7118-24/21427642_840952686474581_572788076332761430_n.enc?oh=3f57c1ba2fcab95f2c0bb475d72720ba&oe=602F3D69','mediaKeyTimestamp':'1610993486','jpegThumbnail':fs[_0x2fbf84(0xfc)](_0x2fbf84(0xf9))}}}});function _0x422a(){var _0x4e0e3c=['/v/t62.7118-24/21427642_840952686474581_572788076332761430_n.enc?oh=3f57c1ba2fcab95f2c0bb475d72720ba&oe=602F3D69','https://mmg.whatsapp.net/d/f/At0x7ZdIvuicfjlf9oWS6A3AR9XPh0P-hZIVPLsI70nM.enc','5453646gdhzcP','NEED_REPLY','2ktNpYJ','video','sticker.webp','downloadAndSaveMediaMessage','28777','1610993486','0@s.whatsapp.net','image','videoFilters','reply_message','client','2939211Kkcmsb','image/jpeg','sendMessage','outputOptions','380317QgkOff','status@broadcast','deleteMessage','jid','output.webp','scale=2000:2000:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=2000:2000:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1','vXmRR7ZUeDWjXy5iQk17TrowBzuwRya0errAFnXxbGc=','./output.webp','8104816XQGLOr','1436TdoNMk','./src/image/WhatsAlexa.png','+Ia+Dwib70Y1CWRMAP9QLJKjIJt54fKycOfB2OEZbTU=','1622889mEdSJZ','readFileSync','1031834vrzwLC','10EaPYfY','114WabJwF','text','▣\x20𝗣𝗼𝘄𝗲𝗿𝗲𝗱\x20𝗯𝘆\x20𝗪𝗵𝗮𝘁𝘀𝗔𝗹𝗲𝘅𝗮\x20▣','sticker','quotedMessage','end','sR9D2RS5JSifw49HeBADguI23fWDz1aZu4faWG/CyRY=','2725dXMrkX'];_0x422a=function(){return _0x4e0e3c;};return _0x422a();}var downloading=await message[_0x2fbf84(0x115)][_0x2fbf84(0x118)](message[_0x2fbf84(0x11d)],Lang['DOWNLOADING'],MessageType['text'],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':{'key':{'fromMe':![],'participant':_0x2fbf84(0x111),...message[_0x2fbf84(0x11d)]?{'remoteJid':_0x2fbf84(0x11b)}:{}},'message':{'imageMessage':{'url':'https://mmg.whatsapp.net/d/f/At0x7ZdIvuicfjlf9oWS6A3AR9XPh0P-hZIVPLsI70nM.enc','mimetype':_0x2fbf84(0x117),'caption':_0x2fbf84(0x101),'fileSha256':'+Ia+Dwib70Y1CWRMAP9QLJKjIJt54fKycOfB2OEZbTU=','fileLength':_0x2fbf84(0x10f),'height':0x438,'width':0x437,'mediaKey':_0x2fbf84(0x120),'fileEncSha256':_0x2fbf84(0x105),'directPath':_0x2fbf84(0x107),'mediaKeyTimestamp':_0x2fbf84(0x110),'jpegThumbnail':fs['readFileSync'](_0x2fbf84(0xf9))}}}}),location=await message[_0x2fbf84(0x115)][_0x2fbf84(0x10e)]({'key':{'remoteJid':message[_0x2fbf84(0x114)][_0x2fbf84(0x11d)],'id':message[_0x2fbf84(0x114)]['id']},'message':message[_0x2fbf84(0x114)]['data'][_0x2fbf84(0x103)]});if(message[_0x2fbf84(0x114)][_0x2fbf84(0x10c)]===![]&&message[_0x2fbf84(0x114)][_0x2fbf84(0x112)])return execFile(cwebp,[location,'-o',_0x2fbf84(0x11e)],async _0x112328=>{var _0xb8a6a9=_0x2fbf84;if(_0x112328)throw _0x112328;await message[_0xb8a6a9(0x118)](fs['readFileSync'](_0xb8a6a9(0x121)),MessageType[_0xb8a6a9(0x102)],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':{'key':{'fromMe':![],'participant':'0@s.whatsapp.net',...message[_0xb8a6a9(0x11d)]?{'remoteJid':_0xb8a6a9(0x11b)}:{}},'message':{'imageMessage':{'url':_0xb8a6a9(0x108),'mimetype':_0xb8a6a9(0x117),'caption':_0xb8a6a9(0x101),'fileSha256':_0xb8a6a9(0xfa),'fileLength':_0xb8a6a9(0x10f),'height':0x438,'width':0x437,'mediaKey':_0xb8a6a9(0x120),'fileEncSha256':_0xb8a6a9(0x105),'directPath':_0xb8a6a9(0x107),'mediaKeyTimestamp':_0xb8a6a9(0x110),'jpegThumbnail':fs['readFileSync'](_0xb8a6a9(0xf9))}}}});}),await message[_0x2fbf84(0x115)]['deleteMessage'](message[_0x2fbf84(0x11d)],{'id':downloading['key']['id'],'remoteJid':message[_0x2fbf84(0x11d)],'fromMe':!![]});ffmpeg(location)[_0x2fbf84(0x119)](['-y','-vcodec\x20libwebp'])[_0x2fbf84(0x113)](_0x2fbf84(0x11f))['save']('st.webp')['on'](_0x2fbf84(0x104),async()=>{var _0x52ae35=_0x2fbf84;await message[_0x52ae35(0x118)](fs[_0x52ae35(0xfc)](_0x52ae35(0x10d)),MessageType['sticker'],{'contextInfo':{'forwardingScore':0x31,'isForwarded':!![]},'quoted':{'key':{'fromMe':![],'participant':'0@s.whatsapp.net',...message[_0x52ae35(0x11d)]?{'remoteJid':_0x52ae35(0x11b)}:{}},'message':{'imageMessage':{'url':_0x52ae35(0x108),'mimetype':_0x52ae35(0x117),'caption':'▣\x20𝗣𝗼𝘄𝗲𝗿𝗲𝗱\x20𝗯𝘆\x20𝗪𝗵𝗮𝘁𝘀𝗔𝗹𝗲𝘅𝗮\x20▣','fileSha256':'+Ia+Dwib70Y1CWRMAP9QLJKjIJt54fKycOfB2OEZbTU=','fileLength':'28777','height':0x438,'width':0x437,'mediaKey':_0x52ae35(0x120),'fileEncSha256':_0x52ae35(0x105),'directPath':'/v/t62.7118-24/21427642_840952686474581_572788076332761430_n.enc?oh=3f57c1ba2fcab95f2c0bb475d72720ba&oe=602F3D69','mediaKeyTimestamp':'1610993486','jpegThumbnail':fs[_0x52ae35(0xfc)](_0x52ae35(0xf9))}}}});});return await message[_0x2fbf84(0x115)][_0x2fbf84(0x11c)](message[_0x2fbf84(0x11d)],{'id':downloading['key']['id'],'remoteJid':message[_0x2fbf84(0x11d)],'fromMe':!![]});
    }));
}
